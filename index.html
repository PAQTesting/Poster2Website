<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Medical Poster Converter - Transform Research into Beautiful Websites</title>
    <link rel="icon" href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 16 16%22><text y=%221em%22 font-size=%2216%22>üñ•Ô∏è</text></svg>">
    <!-- PDF.js library -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/pdf.js/2.11.338/pdf.min.js"></script>
    <script>
        pdfjsLib.GlobalWorkerOptions.workerSrc = 'https://cdnjs.cloudflare.com/ajax/libs/pdf.js/2.11.338/pdf.worker.min.js';
    </script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', system-ui, sans-serif;
            background: #f8fafc;
            color: #1a1a1a;
            line-height: 1.6;
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            overflow-x: hidden;
        }

        .main-content {
            flex: 1;
        }

        /* Screen Management */
        .screen {
            display: none;
            min-height: calc(100vh - 120px);
        }

        .screen.active {
            display: block;
            animation: fadeIn 0.3s ease-out;
        }

        @keyframes fadeIn {
            from {
                opacity: 0;
                transform: translateY(10px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        /* Header Icons */
        .header-icons {
            position: absolute;
            top: 20px;
            right: 20px;
            display: flex;
            gap: 12px;
        }

        .icon-button {
            background: white;
            border: 1px solid #e5e7eb;
            border-radius: 12px;
            width: 44px;
            height: 44px;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: all 0.2s ease;
            font-size: 20px;
            color: #6b7280;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.05);
        }

        .icon-button:hover {
            background: #f0fdf4;
            border-color: #16a34a;
            color: #16a34a;
            transform: translateY(-1px);
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
        }

        /* Upload Screen */
        .upload-container {
            max-width: 600px;
            margin: 0 auto;
            padding: 20px;
        }

        .drop-zone {
            background: white;
            border: 3px dashed #e5e7eb;
            border-radius: 20px;
            padding: 60px 40px;
            cursor: pointer;
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            text-align: center;
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.08);
        }

        .drop-zone:hover {
            border-color: #6366f1;
            transform: translateY(-2px);
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
        }

        .drop-zone.drag-over {
            border-color: #6366f1;
            background: #f0f9ff;
        }

        .upload-icon {
            display: flex;
            justify-content: center;
            animation: pulse 2s ease-in-out infinite;
            margin-bottom: 24px;
        }

        @keyframes pulse {
            0% {
                transform: scale(1);
            }
            50% {
                transform: scale(1.05);
            }
            100% {
                transform: scale(1);
            }
        }

        .upload-title {
            font-size: 24px;
            font-weight: 600;
            color: #1a1a1a;
            margin-bottom: 8px;
        }

        .upload-subtitle {
            font-size: 16px;
            color: #6b7280;
            margin-bottom: 24px;
        }

        .browse-button {
            background: linear-gradient(135deg, #16a34a 0%, #15803d 100%);
            color: white;
            padding: 12px 32px;
            border-radius: 30px;
            font-weight: 600;
            border: none;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 4px 15px rgba(22, 163, 74, 0.3);
        }

        .browse-button:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(22, 163, 74, 0.4);
        }

        .upload-formats {
            font-size: 14px;
            color: #9ca3af;
            margin-top: 20px;
        }

        /* Loading Screen */
        .loading-screen {
            background: linear-gradient(135deg, #16a34a 0%, #15803d 100%);
            display: none;
            align-items: center;
            justify-content: center;
        }
        
        .loading-screen.active {
            display: flex;
        }

        .loading-container {
            text-align: center;
            color: white;
            padding: 20px;
        }

        .loading-spinner {
            width: 60px;
            height: 60px;
            border: 4px solid rgba(255, 255, 255, 0.2);
            border-top: 4px solid white;
            border-radius: 50%;
            animation: spin 1s linear infinite;
            margin: 0 auto 24px;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        .loading-title {
            font-size: 24px;
            font-weight: 600;
            margin-bottom: 12px;
        }

        .loading-message {
            font-size: 16px;
            opacity: 0.9;
        }

        /* Editor Screen */
        .editor-header {
            background: white;
            padding: 24px;
            border-bottom: 1px solid #e5e7eb;
            display: flex;
            justify-content: space-between;
            align-items: center;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.05);
        }

        .back-button {
            display: flex;
            align-items: center;
            gap: 8px;
            padding: 10px 16px;
            color: #16a34a;
            background: #f0fdf4;
            border: 1px solid #bbf7d0;
            border-radius: 12px;
            cursor: pointer;
            transition: all 0.2s ease;
            text-decoration: none;
        }

        .back-button:hover {
            background: #dcfce7;
            transform: translateY(-1px);
        }

        .editor-title {
            text-align: center;
            flex: 1;
        }

        .editor-title h1 {
            font-size: 28px;
            font-weight: 600;
            color: #1a1a1a;
            margin-bottom: 4px;
        }

        .pdf-name {
            font-size: 14px;
            color: #6b7280;
        }

        .editor-actions {
            display: flex;
            gap: 12px;
        }

        /* Tabs */
        .tabs {
            display: flex;
            gap: 24px;
            padding: 24px 24px 0;
            background: white;
        }

        .tab {
            padding: 12px 0;
            font-size: 16px;
            font-weight: 500;
            color: #6b7280;
            cursor: pointer;
            border-bottom: 3px solid transparent;
            transition: all 0.2s ease;
        }

        .tab.active {
            color: #6366f1;
            border-bottom-color: #6366f1;
        }

        .tab:hover:not(.active) {
            color: #374151;
        }

        /* Button Styles */
        .btn {
            padding: 10px 20px;
            border-radius: 12px;
            font-size: 14px;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.2s ease;
            border: none;
            display: inline-flex;
            align-items: center;
            gap: 8px;
        }

        .btn-primary {
            background: linear-gradient(135deg, #6366f1 0%, #a855f7 100%);
            color: white;
            box-shadow: 0 4px 12px rgba(99, 102, 241, 0.3);
        }

        .btn-primary:hover {
            transform: translateY(-1px);
            box-shadow: 0 6px 16px rgba(99, 102, 241, 0.4);
        }

        .btn-secondary {
            background: white;
            color: #6b7280;
            border: 1px solid #e5e7eb;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.05);
        }

        .btn-secondary:hover {
            background: #f9fafb;
            border-color: #6366f1;
            color: #6366f1;
            transform: translateY(-1px);
        }

        /* Main Content */
        .editor-content {
            display: grid;
            grid-template-columns: 1fr 1fr;
            min-height: 600px;
            background: white;
        }

        .form-section {
            padding: 32px;
            border-right: 1px solid #f3f4f6;
            overflow-y: auto;
            max-height: 700px;
        }

        .preview-section {
            padding: 32px;
            background: #fafafa;
        }

        /* Form Elements */
        .form-group {
            margin-bottom: 28px;
        }

        .form-label {
            display: block;
            font-size: 14px;
            font-weight: 600;
            color: #1a1a1a;
            margin-bottom: 8px;
        }

        .form-input,
        .form-textarea,
        .form-select {
            width: 100%;
            padding: 12px 16px;
            border: 1px solid #d1d5db;
            border-radius: 12px;
            font-size: 16px;
            transition: all 0.2s ease;
            background: white;
        }

        .form-input:focus,
        .form-textarea:focus,
        .form-select:focus {
            outline: none;
            border-color: #16a34a;
            box-shadow: 0 0 0 3px rgba(22, 163, 74, 0.1);
        }

        .form-textarea {
            resize: vertical;
            min-height: 100px;
            font-family: inherit;
        }

        .form-textarea[contenteditable="true"] {
            resize: none;
            border: 1px solid #d1d5db;
            border-radius: 12px;
            padding: 12px 16px;
            background: white;
            font-size: 16px;
            line-height: 1.5;
        }

        .form-textarea[contenteditable="true"]:focus {
            outline: none;
            border-color: #16a34a;
            box-shadow: 0 0 0 3px rgba(22, 163, 74, 0.1);
        }

        .form-textarea[contenteditable="true"] b {
            font-weight: bold;
        }

        .form-textarea[contenteditable="true"] i {
            font-style: italic;
        }

        .form-textarea[contenteditable="true"] u {
            text-decoration: underline;
        }

        .form-textarea[contenteditable="true"] sup {
            vertical-align: super;
            font-size: smaller;
        }

        /* Section Editor */
        .sections-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 24px;
        }

        .sections-title {
            font-size: 18px;
            font-weight: 600;
            color: #1a1a1a;
        }

        .section-editor {
            background: white;
            border: 1px solid #e5e7eb;
            border-radius: 16px;
            margin-bottom: 20px;
            overflow: hidden;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.04);
            transition: all 0.2s ease;
        }

        .section-editor:hover {
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.08);
        }

        .section-editor.header-section {
            background: linear-gradient(135deg, #f0fdf4 0%, #dcfce7 100%);
            border-color: #bbf7d0;
        }

        .section-header {
            padding: 20px 24px;
            cursor: pointer;
            display: flex;
            justify-content: space-between;
            align-items: center;
            background: #fafafa;
            border-bottom: 1px solid #f3f4f6;
            transition: all 0.2s ease;
        }

        .section-editor.header-section .section-header {
            background: rgba(255, 255, 255, 0.7);
        }

        .section-header:hover {
            background: #f5f5f5;
        }

        .section-editor.header-section .section-header:hover {
            background: rgba(255, 255, 255, 0.9);
        }

        .section-title-group {
            display: flex;
            align-items: center;
            gap: 12px;
            flex: 1;
            position: relative;
        }

        .section-icon {
            font-size: 20px;
            cursor: pointer;
            padding: 4px;
            border-radius: 8px;
            transition: all 0.2s ease;
        }

        .section-icon:hover {
            background: rgba(22, 163, 74, 0.1);
        }

        .section-name {
            font-size: 16px;
            font-weight: 600;
            color: #1a1a1a;
        }

        .section-controls {
            display: flex;
            gap: 8px;
            align-items: center;
        }

        .icon-btn {
            width: 32px;
            height: 32px;
            border: 1px solid #e5e7eb;
            background: white;
            border-radius: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            font-size: 14px;
            transition: all 0.2s ease;
        }

        .icon-btn:hover:not(:disabled) {
            background: #f3f4f6;
            border-color: #16a34a;
            color: #16a34a;
        }

        .icon-btn:disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }

        .icon-btn.danger:hover {
            background: #fee2e2;
            border-color: #ef4444;
            color: #ef4444;
        }

        .expand-indicator {
            color: #9ca3af;
            font-size: 12px;
            margin-left: 8px;
        }

        .section-content {
            padding: 0;
            max-height: 0;
            overflow: hidden;
            transition: all 0.3s ease;
        }

        .section-content.expanded {
            max-height: 1000px;
            padding: 24px;
        }

        /* Icon Picker */
        .icon-picker {
            display: none;
            position: absolute;
            top: 100%;
            left: 0;
            background: white;
            border: 1px solid #e5e7eb;
            border-radius: 12px;
            padding: 16px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.15);
            z-index: 1000;
            grid-template-columns: repeat(8, 1fr);
            gap: 8px;
            min-width: 320px;
            margin-top: 8px;
        }

        .icon-picker.active {
            display: grid;
        }

        .icon-option {
            width: 36px;
            height: 36px;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            border-radius: 8px;
            font-size: 18px;
            transition: all 0.2s ease;
        }

        .icon-option:hover {
            background: #f0fdf4;
            transform: scale(1.1);
        }

        /* Toolbar */
        .toolbar {
            display: flex;
            gap: 4px;
            margin-bottom: 12px;
            padding: 12px;
            background: #f9fafb;
            border-radius: 12px;
            border: 1px solid #e5e7eb;
        }

        .toolbar-btn {
            width: 36px;
            height: 36px;
            border: none;
            background: white;
            border-radius: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            font-size: 14px;
            transition: all 0.2s ease;
            box-shadow: 0 1px 2px rgba(0, 0, 0, 0.05);
        }

        .toolbar-btn:hover {
            background: #e5e7eb;
            transform: translateY(-1px);
        }

        .toolbar-separator {
            width: 1px;
            background: #d1d5db;
            margin: 6px 8px;
        }

        /* Preview */
        .preview-container {
            background: white;
            border-radius: 16px;
            overflow: hidden;
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.08);
            border: 1px solid #e5e7eb;
            height: 100%;
        }

        .preview-header {
            padding: 16px 20px;
            background: #fafafa;
            border-bottom: 1px solid #e5e7eb;
            display: flex;
            align-items: center;
            gap: 12px;
        }

        .preview-dots {
            display: flex;
            gap: 6px;
        }

        .preview-dot {
            width: 12px;
            height: 12px;
            border-radius: 50%;
        }

        .preview-dot:nth-child(1) { background: #ff5f57; }
        .preview-dot:nth-child(2) { background: #ffbd2e; }
        .preview-dot:nth-child(3) { background: #28ca42; }

        .preview-url {
            font-size: 14px;
            color: #9ca3af;
            margin-left: 8px;
        }

        .preview-iframe {
            width: 100%;
            height: 500px;
            border: none;
            background: white;
        }

        /* Color Picker */
        .color-picker {
            display: flex;
            gap: 12px;
            align-items: center;
        }

        .color-input {
            width: 60px;
            height: 40px;
            padding: 4px;
            border: 1px solid #d1d5db;
            border-radius: 12px;
            cursor: pointer;
        }

        /* Range Slider */
        .range-group {
            display: flex;
            align-items: center;
            gap: 16px;
        }

        .range-input {
            flex: 1;
            height: 6px;
            border-radius: 3px;
            background: #e5e7eb;
            outline: none;
            -webkit-appearance: none;
        }

        .range-input::-webkit-slider-thumb {
            -webkit-appearance: none;
            width: 20px;
            height: 20px;
            border-radius: 50%;
            background: linear-gradient(135deg, #16a34a 0%, #15803d 100%);
            cursor: pointer;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);
        }

        .range-input::-moz-range-thumb {
            width: 20px;
            height: 20px;
            border-radius: 50%;
            background: linear-gradient(135deg, #16a34a 0%, #15803d 100%);
            cursor: pointer;
            border: none;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);
        }

        .range-value {
            font-size: 14px;
            font-weight: 600;
            color: #16a34a;
            min-width: 50px;
            text-align: right;
        }

        /* Modals */
        .modal {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0, 0, 0, 0.5);
            display: none;
            align-items: center;
            justify-content: center;
            z-index: 1000;
            padding: 20px;
            backdrop-filter: blur(10px);
        }

        .modal.active {
            display: flex;
            animation: fadeIn 0.3s ease-out;
        }

        .modal-content {
            background: white;
            border-radius: 20px;
            padding: 32px;
            max-width: 600px;
            width: 100%;
            max-height: 80vh;
            overflow-y: auto;
            position: relative;
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.2);
        }

        .modal-content.large {
            max-width: 95%;
            height: 95vh;
            padding: 0;
            display: flex;
            flex-direction: column;
        }

        .modal-header {
            padding: 32px 32px 0;
            flex-shrink: 0;
        }

        .modal-body {
            flex: 1;
            overflow: hidden;
        }

        .close-btn {
            position: absolute;
            top: 20px;
            right: 20px;
            width: 40px;
            height: 40px;
            border: none;
            background: #f3f4f6;
            border-radius: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            font-size: 18px;
            color: #6b7280;
            transition: all 0.2s ease;
        }

        .close-btn:hover {
            background: #e5e7eb;
            color: #1a1a1a;
            transform: scale(1.05);
        }

        .modal-title {
            font-size: 28px;
            font-weight: 600;
            color: #1a1a1a;
            margin-bottom: 8px;
        }

        .modal-subtitle {
            font-size: 16px;
            color: #6b7280;
            margin-bottom: 32px;
        }

        /* Export Options */
        .export-option {
            display: block;
            padding: 20px 24px;
            margin-bottom: 16px;
            border: 2px solid #e5e7eb;
            border-radius: 16px;
            cursor: pointer;
            transition: all 0.2s ease;
            background: white;
        }

        .export-option:hover {
            border-color: #16a34a;
            background: #f0fdf4;
            transform: translateY(-1px);
        }

        .export-option input[type="radio"] {
            margin-right: 12px;
            transform: scale(1.2);
        }

        .export-option-title {
            font-weight: 600;
            color: #1a1a1a;
            margin-bottom: 4px;
        }

        .export-option-desc {
            font-size: 14px;
            color: #6b7280;
        }

        /* Toast Notification */
        .toast {
            position: fixed;
            bottom: 24px;
            right: 24px;
            background: #1f2937;
            color: white;
            padding: 16px 24px;
            border-radius: 12px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
            z-index: 1001;
            transform: translateX(100%);
            transition: transform 0.3s ease;
            max-width: 400px;
        }

        .toast.show {
            transform: translateX(0);
        }

        .toast.success {
            background: linear-gradient(135deg, #16a34a 0%, #15803d 100%);
        }

        .toast.error {
            background: linear-gradient(135deg, #ef4444 0%, #dc2626 100%);
        }

        /* Footer */
        .footer {
            background: white;
            border-top: 1px solid #e5e7eb;
            padding: 24px 16px;
            text-align: center;
            margin-top: 40px;
        }

        .footer-content {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 16px;
            font-size: 14px;
            color: #6b7280;
            max-width: 1200px;
            margin: 0 auto;
        }

        .footer a {
            color: #16a34a;
            text-decoration: none;
            font-weight: 500;
            transition: all 0.2s ease;
        }

        .footer a:hover {
            color: #15803d;
            text-decoration: underline;
        }

        .pizza-button {
            background: linear-gradient(135deg, #f97316 0%, #ea580c 100%);
            color: white !important;
            padding: 8px 16px;
            border-radius: 20px;
            text-decoration: none !important;
            font-weight: 600;
            font-size: 13px;
            transition: all 0.3s ease;
            box-shadow: 0 2px 8px rgba(249, 115, 22, 0.3);
        }

        .pizza-button:hover {
            background: linear-gradient(135deg, #ea580c 0%, #dc2626 100%);
            transform: translateY(-1px);
            box-shadow: 0 4px 12px rgba(249, 115, 22, 0.4);
            color: white !important;
        }

        /* Responsive */
        @media (max-width: 768px) {
            .editor-header {
                flex-direction: column;
                gap: 16px;
                padding: 16px;
            }

            .editor-actions {
                width: 100%;
                justify-content: center;
            }

            .editor-content {
                grid-template-columns: 1fr;
            }

            .form-section {
                border-right: none;
                border-bottom: 1px solid #f3f4f6;
            }

            .upload-container {
                padding: 16px;
            }

            .drop-zone {
                padding: 40px 20px;
            }

            .upload-title {
                font-size: 20px;
            }

            .tabs {
                padding: 16px 16px 0;
                gap: 16px;
            }

            .form-section,
            .preview-section {
                padding: 20px;
            }

            .footer-content {
                gap: 12px;
            }

            .pizza-button {
                font-size: 12px;
                padding: 6px 14px;
            }
        }

        /* Utility Classes */
        .hidden {
            display: none !important;
        }

        .text-center {
            text-align: center;
        }

        .flex {
            display: flex;
        }

        .items-center {
            align-items: center;
        }

        .justify-between {
            justify-content: space-between;
        }

        .gap-2 {
            gap: 8px;
        }

        .gap-3 {
            gap: 12px;
        }

        .gap-4 {
            gap: 16px;
        }

        /* Hide file input */
        input[type="file"] {
            display: none;
        }

        /* Preview Frame Styles */
        .preview-frame {
            background: white;
            border-radius: 12px;
            box-shadow: 0 10px 40px rgba(0, 0, 0, 0.2);
            overflow: hidden;
            transition: all 0.3s ease;
        }

        .preview-frame.desktop {
            width: 100%;
            max-width: 1200px;
            height: 80vh;
        }

        .preview-frame.tablet-h {
            width: 1024px;
            height: 768px;
        }

        .preview-frame.tablet-v {
            width: 768px;
            height: 1024px;
        }

        .preview-frame.mobile {
            width: 375px;
            height: 667px;
        }

        @media (max-width: 768px) {
            .preview-frame.tablet-h,
            .preview-frame.tablet-v {
                width: 90vw;
                height: 70vh;
            }
            
            .preview-frame.mobile {
                width: 375px;
                height: 60vh;
            }
        }
    </style>
</head>
<body>
    <div class="main-content">
        <!-- Upload Screen -->
        <div id="uploadScreen" class="screen active">
            <!-- Header Icons -->
            <div class="header-icons">
                <button class="icon-button" onclick="showInfo()" title="Info">
                    <span>‚ÑπÔ∏è</span>
                </button>
                <button class="icon-button" onclick="goHome()" title="Home">
                    <span>üè†</span>
                </button>
            </div>

            <div style="max-width: 1200px; margin: 0 auto; padding: 40px 20px; text-align: center;">
                <!-- Header -->
                <header style="margin-bottom: 40px;">
                    <h1 style="font-size: 48px; font-weight: 700; color: #1a1a1a; margin-bottom: 16px; line-height: 1.1;">
                        Medical Poster Converter
                    </h1>
                    <p style="font-size: 20px; color: #6b7280; max-width: 600px; margin: 0 auto;">
                        Transform your conference posters into beautiful, responsive websites in minutes
                    </p>
                </header>

                <!-- Upload Area -->
                <div class="upload-container">
                    <div id="dropZone" class="drop-zone">
                        <input type="file" id="fileInput" accept=".pdf,.docx,.txt,.png,.jpg,.jpeg">
                        <div class="upload-icon">
                            <svg width="60" height="60" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                <path d="M12 15L12 3M12 3L16 7M12 3L8 7" stroke="url(#gradient)" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                                <path d="M2 17L2 19C2 20.1046 2.89543 21 4 21L20 21C21.1046 21 22 20.1046 22 19L22 17" stroke="url(#gradient)" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                                <defs>
                                    <linearGradient id="gradient" x1="0%" y1="0%" x2="100%" y2="100%">
                                        <stop offset="0%" stop-color="#16a34a"/>
                                        <stop offset="100%" stop-color="#15803d"/>
                                    </linearGradient>
                                </defs>
                            </svg>
                        </div>
                        <h3 class="upload-title">Drop your poster here</h3>
                        <p class="upload-subtitle">or click to browse your files</p>
                        <button class="browse-button">Choose File</button>
                    </div>
                    <div class="upload-formats">
                        Supports PDF, Word (DOCX), Text (TXT), and image files
                    </div>
                </div>

                <!-- Features -->
                <div style="margin-top: 80px;">
                    <h2 style="font-size: 32px; font-weight: 700; color: #1a1a1a; margin-bottom: 40px; text-transform: uppercase; letter-spacing: 1px;">
                        What You Get
                    </h2>
                    <div style="display: grid; grid-template-columns: repeat(4, 1fr); gap: 32px; max-width: 1000px; margin: 0 auto;">
                        <div style="text-align: center;">
                            <div style="width: 64px; height: 64px; background: linear-gradient(135deg, #16a34a 0%, #15803d 100%); border-radius: 16px; display: flex; align-items: center; justify-content: center; margin: 0 auto 20px; color: white; font-size: 24px; box-shadow: 0 8px 25px rgba(22, 163, 74, 0.25);">
                                ü§ñ
                            </div>
                            <h4 style="font-weight: 600; color: #1a1a1a; margin-bottom: 12px; font-size: 18px;">Smart Text Extraction</h4>
                            <p style="font-size: 14px; color: #6b7280; line-height: 1.5;">Automatically extracts content from PDFs and organizes into sections</p>
                        </div>
                        <div style="text-align: center;">
                            <div style="width: 64px; height: 64px; background: linear-gradient(135deg, #16a34a 0%, #15803d 100%); border-radius: 16px; display: flex; align-items: center; justify-content: center; margin: 0 auto 20px; color: white; font-size: 24px; box-shadow: 0 8px 25px rgba(22, 163, 74, 0.25);">
                                ‚ú®
                            </div>
                            <h4 style="font-weight: 600; color: #1a1a1a; margin-bottom: 12px; font-size: 18px;">Rich Text Editing</h4>
                            <p style="font-size: 14px; color: #6b7280; line-height: 1.5;">Format text with bold, italic, lists, and custom styling options</p>
                        </div>
                        <div style="text-align: center;">
                            <div style="width: 64px; height: 64px; background: linear-gradient(135deg, #16a34a 0%, #15803d 100%); border-radius: 16px; display: flex; align-items: center; justify-content: center; margin: 0 auto 20px; color: white; font-size: 24px; box-shadow: 0 8px 25px rgba(22, 163, 74, 0.25);">
                                üì±
                            </div>
                            <h4 style="font-weight: 600; color: #1a1a1a; margin-bottom: 12px; font-size: 18px;">Responsive Design</h4>
                            <p style="font-size: 14px; color: #6b7280; line-height: 1.5;">Beautiful websites that look great on desktop, tablet, and mobile</p>
                        </div>
                        <div style="text-align: center;">
                            <div style="width: 64px; height: 64px; background: linear-gradient(135deg, #16a34a 0%, #15803d 100%); border-radius: 16px; display: flex; align-items: center; justify-content: center; margin: 0 auto 20px; color: white; font-size: 24px; box-shadow: 0 8px 25px rgba(22, 163, 74, 0.25);">
                                üíæ
                            </div>
                            <h4 style="font-weight: 600; color: #1a1a1a; margin-bottom: 12px; font-size: 18px;">Multiple Export Formats</h4>
                            <p style="font-size: 14px; color: #6b7280; line-height: 1.5;">Export as HTML, React component, or Next.js page</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Loading Screen -->
        <div id="loadingScreen" class="screen loading-screen">
            <div class="loading-container">
                <div class="loading-spinner"></div>
                <h2 id="loadingTitle" class="loading-title">Processing your poster...</h2>
                <p id="loadingMessage" class="loading-message">This may take a moment</p>
            </div>
        </div>

        <!-- Editor Screen -->
        <div id="editorScreen" class="screen">
            <!-- Header -->
            <div class="editor-header">
                <button id="backButton" class="back-button">
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7"/>
                    </svg>
                    New Poster
                </button>
                <div class="editor-title">
                    <h1>Poster Editor</h1>
                    <p class="pdf-name" id="pdfName"></p>
                </div>
                <div class="editor-actions">
                    <button class="btn btn-secondary" onclick="showPreviewModal()">
                        üëÅ Preview
                    </button>
                    <button class="btn btn-primary" onclick="exportWebsite()">
                        üíæ Export
                    </button>
                </div>
            </div>

            <!-- Tabs -->
            <div class="tabs">
                <div class="tab active" data-tab="content">üìù Content</div>
                <div class="tab" data-tab="design">üé® Design</div>
            </div>

            <!-- Main Content -->
            <div class="editor-content">
                <!-- Form Section -->
                <div class="form-section">
                    <!-- Content Tab -->
                    <div id="contentTab" class="tab-content">
                        <!-- Sections -->
                        <div class="form-group">
                            <div class="sections-header">
                                <h3 class="sections-title">üìë All Sections</h3>
                                <button class="btn btn-secondary" onclick="addSection()">+ Add Section</button>
                            </div>
                            <div id="sectionsContainer">
                                <!-- Dynamic sections will be added here -->
                            </div>
                        </div>
                    </div>

                    <!-- Design Tab -->
                    <div id="designTab" class="tab-content hidden">
                        <div class="form-group">
                            <label class="form-label">üé® Color Scheme</label>
                            <select id="colorScheme" class="form-select" onchange="updateColorScheme()">
                                <option value="clinical">Clinical Blue</option>
                                <option value="research">Research Green</option>
                                <option value="pharma">Pharma Purple</option>
                                <option value="modern">Modern Teal</option>
                                <option value="academic">Academic Red</option>
                                <option value="custom">Custom Colors</option>
                            </select>
                        </div>

                        <div class="form-group">
                            <label class="form-label">üé® Primary Color</label>
                            <div class="color-picker">
                                <input type="color" id="primaryColor" class="color-input" value="#16a34a" onchange="updatePreview()">
                                <input type="text" id="primaryColorHex" class="form-input" value="#16a34a" onchange="updatePreview()">
                            </div>
                        </div>

                        <div class="form-group">
                            <label class="form-label">üé® Secondary Color</label>
                            <div class="color-picker">
                                <input type="color" id="secondaryColor" class="color-input" value="#6b7280" onchange="updatePreview()">
                                <input type="text" id="secondaryColorHex" class="form-input" value="#6b7280" onchange="updatePreview()">
                            </div>
                        </div>

                        <div class="form-group">
                            <label class="form-label">üñºÔ∏è Logo</label>
                            <input type="file" id="logoInput" accept="image/*" onchange="handleLogoUpload(event)">
                            <button class="btn btn-secondary" onclick="document.getElementById('logoInput').click()">
                                Upload Logo
                            </button>
                            <div id="logoPreview"></div>
                        </div>

                        <div class="form-group">
                            <label class="form-label">üìù Font Style</label>
                            <select id="fontStyle" class="form-select" onchange="updatePreview()">
                                <option value="system">System Font</option>
                                <option value="serif">Serif</option>
                                <option value="mono">Monospace</option>
                            </select>
                        </div>

                        <div class="form-group">
                            <label class="form-label">üìê Title Size</label>
                            <div class="range-group">
                                <input type="range" id="titleSize" class="range-input" min="24" max="60" value="32" onchange="updateTitleSize()">
                                <span class="range-value" id="titleSizeValue">32px</span>
                            </div>
                        </div>

                        <div class="form-group">
                            <label class="form-label">üìè Content Size</label>
                            <div class="range-group">
                                <input type="range" id="contentSize" class="range-input" min="14" max="24" value="16" onchange="updateContentSize()">
                                <span class="range-value" id="contentSizeValue">16px</span>
                            </div>
                        </div>

                        <div class="form-group">
                            <label class="form-label">üì± Layout</label>
                            <select id="layoutStyle" class="form-select" onchange="updatePreview()">
                                <option value="single">Single Page</option>
                                <option value="sections">Section Navigation</option>
                            </select>
                        </div>
                    </div>
                </div>

                <!-- Preview Section -->
                <div class="preview-section">
                    <div class="preview-container">
                        <div class="preview-header">
                            <div class="preview-dots">
                                <div class="preview-dot"></div>
                                <div class="preview-dot"></div>
                                <div class="preview-dot"></div>
                            </div>
                            <div class="preview-url">your-poster-website.com</div>
                        </div>
                        <iframe class="preview-iframe" id="websitePreview"></iframe>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Footer -->
    <footer class="footer">
        <div class="footer-content">
            <div>
                Made with üß° by Jack
            </div>
            <a href="https://coff.ee/genuinejack" target="_blank" class="pizza-button">
                üçï Buy me some pizza
            </a>
        </div>
    </footer>

    <!-- Preview Modal -->
    <div id="previewModal" class="modal">
        <div class="modal-content large">
            <div class="modal-header">
                <button class="close-btn" onclick="closePreviewModal()">√ó</button>
                <h2 class="modal-title">Website Preview</h2>
                <div style="display: flex; gap: 12px; margin-top: 16px;">
                    <button class="btn btn-secondary active" onclick="setPreviewDevice('desktop')" id="desktopBtn">
                        üíª Desktop
                    </button>
                    <button class="btn btn-secondary" onclick="setPreviewDevice('tablet-h')" id="tabletHBtn">
                        üì± Tablet (H)
                    </button>
                    <button class="btn btn-secondary" onclick="setPreviewDevice('tablet-v')" id="tabletVBtn">
                        üì± Tablet (V)
                    </button>
                    <button class="btn btn-secondary" onclick="setPreviewDevice('mobile')" id="mobileBtn">
                        üì± Mobile
                    </button>
                </div>
            </div>
            <div class="modal-body">
                <div style="display: flex; justify-content: center; align-items: center; height: 100%; background: #f5f5f5; padding: 20px;">
                    <div id="previewFrame" class="preview-frame desktop">
                        <iframe style="width: 100%; height: 100%; border: none;" id="fullPreview"></iframe>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Export Modal -->
    <div id="exportModal" class="modal">
        <div class="modal-content">
            <button class="close-btn" onclick="closeExportModal()">√ó</button>
            <h2 class="modal-title">Export Your Website</h2>
            <p class="modal-subtitle">Choose your preferred export format:</p>
            
            <div style="margin-bottom: 32px;">
                <label class="export-option">
                    <input type="radio" name="exportFormat" value="html" checked> 
                    <div>
                        <div class="export-option-title">Standalone HTML</div>
                        <div class="export-option-desc">Single file ready to deploy anywhere</div>
                    </div>
                </label>
                <label class="export-option">
                    <input type="radio" name="exportFormat" value="react"> 
                    <div>
                        <div class="export-option-title">React Component</div>
                        <div class="export-option-desc">Modern React with hooks and styled components</div>
                    </div>
                </label>
                <label class="export-option">
                    <input type="radio" name="exportFormat" value="nextjs"> 
                    <div>
                        <div class="export-option-title">Next.js Page</div>
                        <div class="export-option-desc">Server-side rendered with SEO optimization</div>
                    </div>
                </label>
            </div>
            
            <div class="flex gap-3">
                <button class="btn btn-secondary" onclick="closeExportModal()" style="flex: 1;">Cancel</button>
                <button class="btn btn-primary" onclick="downloadWebsite()" style="flex: 1;">Download Code</button>
            </div>
        </div>
    </div>

    <!-- Toast Notification -->
    <div id="toast" class="toast"></div>

    <script>
        // State management
        let extractedData = {
            sections: [],
            logo: null,
            primaryColor: '#16a34a',
            secondaryColor: '#6b7280',
            fontStyle: 'system',
            layoutStyle: 'single',
            titleSize: 32,
            contentSize: 16
        };

        let currentStep = 1;
        let uploadedFile = null;
        let expandedSections = {};
        let currentIconPicker = null;

        // Available icons for sections
        const availableIcons = ['üìå', 'üë•', 'üèõÔ∏è', 'üéØ', 'üìÑ', 'üî¨', 'üß™', 'üìä', 'üí°', 'üìà', 'üß¨', 'üíä', 'üîç', 'üìã', 'üè•', '‚öïÔ∏è', 'üß´', 'ü©∫', 'üìê', 'üíâ'];

        // Color schemes
        const colorSchemes = {
            clinical: { primary: '#3498db', secondary: '#2c3e50' },
            research: { primary: '#27ae60', secondary: '#16a085' },
            pharma: { primary: '#8e44ad', secondary: '#6c3483' },
            modern: { primary: '#17a2b8', secondary: '#138496' },
            academic: { primary: '#e74c3c', secondary: '#c0392b' },
            custom: { primary: '#16a34a', secondary: '#6b7280' }
        };

        // Initialize
        document.addEventListener('DOMContentLoaded', function() {
            setupFileUpload();
            setupTabs();
            setupRangeSliders();
            updatePreview();
            
            // Close icon picker when clicking outside
            document.addEventListener('click', function(e) {
                if (currentIconPicker && !e.target.closest('.section-icon') && !e.target.closest('.icon-picker')) {
                    closeIconPicker();
                }
            });
        });

        function setupFileUpload() {
            const dropZone = document.getElementById('dropZone');
            const fileInput = document.getElementById('fileInput');
            const browseButton = dropZone.querySelector('.browse-button');

            // Click handlers
            dropZone.addEventListener('click', () => fileInput.click());
            browseButton.addEventListener('click', (e) => {
                e.stopPropagation();
                fileInput.click();
            });

            fileInput.addEventListener('change', (e) => {
                if (e.target.files.length > 0) {
                    handleFileUpload(e.target.files[0]);
                }
            });

            // Drag and drop
            dropZone.addEventListener('dragover', (e) => {
                e.preventDefault();
                dropZone.classList.add('drag-over');
            });

            dropZone.addEventListener('dragleave', () => {
                dropZone.classList.remove('drag-over');
            });

            dropZone.addEventListener('drop', (e) => {
                e.preventDefault();
                dropZone.classList.remove('drag-over');
                if (e.dataTransfer.files.length > 0) {
                    handleFileUpload(e.dataTransfer.files[0]);
                }
            });
        }

        function setupTabs() {
            document.querySelectorAll('.tab').forEach(tab => {
                tab.addEventListener('click', function() {
                    const tabName = this.getAttribute('data-tab');
                    switchTab(tabName);
                });
            });
        }

        function setupRangeSliders() {
            const titleSlider = document.getElementById('titleSize');
            const contentSlider = document.getElementById('contentSize');
            
            titleSlider.addEventListener('input', updateTitleSize);
            contentSlider.addEventListener('input', updateContentSize);
        }

        function switchTab(tabName) {
            // Update tab buttons
            document.querySelectorAll('.tab').forEach(tab => {
                tab.classList.remove('active');
                if (tab.getAttribute('data-tab') === tabName) {
                    tab.classList.add('active');
                }
            });

            // Update tab content
            document.querySelectorAll('.tab-content').forEach(content => {
                content.classList.add('hidden');
            });
            document.getElementById(tabName + 'Tab').classList.remove('hidden');
        }

        function handleFileUpload(file) {
            const validTypes = [
                'application/pdf', 
                'application/vnd.openxmlformats-officedocument.wordprocessingml.document',
                'text/plain',
                'image/png', 
                'image/jpeg', 
                'image/jpg'
            ];
            
            if (!validTypes.includes(file.type)) {
                showToast('Please upload a PDF, Word, Text, or image file', 'error');
                return;
            }

            uploadedFile = file;
            processFile(file);
        }

        async function processFile(file) {
            showLoadingScreen();

            if (file.type === 'application/pdf' && typeof pdfjsLib !== 'undefined') {
                await extractPDFContent(file);
            } else {
                setTimeout(() => {
                    createEmptyTemplate();
                    showEditorScreen();
                    if (file.type.startsWith('image/')) {
                        showToast('Image uploaded! Please manually enter your poster content.', 'success');
                    } else {
                        showToast('File uploaded! Please fill in your poster details.', 'success');
                    }
                }, 1500);
            }
        }

        function showLoadingScreen() {
            document.getElementById('uploadScreen').classList.remove('active');
            document.getElementById('loadingScreen').classList.add('active');
        }

        function showEditorScreen() {
            document.getElementById('loadingScreen').classList.remove('active');
            document.getElementById('editorScreen').classList.add('active');
            populateForm();
            updatePreview();
        }

        async function extractPDFContent(file) {
            try {
                document.getElementById('loadingTitle').textContent = 'Extracting PDF Content...';
                document.getElementById('loadingMessage').textContent = 'Reading PDF file...';
                
                const arrayBuffer = await file.arrayBuffer();
                const pdf = await pdfjsLib.getDocument(arrayBuffer).promise;
                
                let fullText = '';
                const totalPages = pdf.numPages;
                
                for (let pageNum = 1; pageNum <= totalPages; pageNum++) {
                    document.getElementById('loadingMessage').textContent = `Extracting page ${pageNum} of ${totalPages}...`;
                    
                    const page = await pdf.getPage(pageNum);
                    const textContent = await page.getTextContent();
                    
                    let pageText = '';
                    let lastY = null;
                    let currentLine = '';
                    let lines = [];
                    
                    const sortedItems = textContent.items.sort((a, b) => {
                        const yDiff = b.transform[5] - a.transform[5];
                        if (Math.abs(yDiff) > 2) return yDiff;
                        return a.transform[4] - b.transform[4];
                    });
                    
                    sortedItems.forEach((item) => {
                        const text = item.str;
                        if (!text || !text.trim()) return;
                        
                        const currentY = item.transform[5];
                        
                        if (lastY !== null && Math.abs(currentY - lastY) > 2) {
                            if (currentLine.trim()) {
                                lines.push(currentLine.trim());
                            }
                            currentLine = text;
                        } else {
                            if (currentLine && !currentLine.endsWith(' ') && !text.startsWith(' ')) {
                                currentLine += ' ';
                            }
                            currentLine += text;
                        }
                        
                        lastY = currentY;
                    });
                    
                    if (currentLine.trim()) {
                        lines.push(currentLine.trim());
                    }
                    
                    pageText = lines.join('\n');
                    fullText += pageText + '\n\n';
                }
                
                document.getElementById('loadingMessage').textContent = 'Analyzing content...';
                parseExtractedText(fullText);
                
                setTimeout(() => {
                    showEditorScreen();
                    showToast('PDF content extracted successfully! Please review and edit as needed.', 'success');
                }, 1000);
                
            } catch (error) {
                console.error('Error extracting PDF:', error);
                createEmptyTemplate();
                showEditorScreen();
                showToast('Unable to extract text from this PDF. Please manually enter your content.', 'error');
            }
        }

        function parseExtractedText(text) {
            const lines = text.split('\n').map(line => line.trim()).filter(line => line);
            
            // Initialize with header sections first
            extractedData.sections = [
                {
                    id: Date.now() + 1,
                    title: 'Title',
                    content: '',
                    icon: 'üìå',
                    image: null,
                    isHeader: true,
                    type: 'title'
                },
                {
                    id: Date.now() + 2,
                    title: 'Authors',
                    content: '',
                    icon: 'üë•',
                    image: null,
                    isHeader: true,
                    type: 'authors'
                },
                {
                    id: Date.now() + 3,
                    title: 'Affiliations',
                    content: '',
                    icon: 'üèõÔ∏è',
                    image: null,
                    isHeader: true,
                    type: 'affiliations'
                },
                {
                    id: Date.now() + 4,
                    title: 'Conference',
                    content: '',
                    icon: 'üéØ',
                    image: null,
                    isHeader: true,
                    type: 'conference'
                }
            ];
            
            // Find title
            for (let i = 0; i < Math.min(5, lines.length); i++) {
                if (lines[i].length > 20 && lines[i].length < 200 && !lines[i].includes(',')) {
                    extractedData.sections[0].content = lines[i].replace(/\n/g, '<br>');
                    break;
                }
            }
            
            // Find authors
            const titleIndex = lines.findIndex(line => line === extractedData.sections[0].content.replace(/<br>/g, '\n'));
            if (titleIndex !== -1) {
                for (let i = titleIndex + 1; i < Math.min(titleIndex + 10, lines.length); i++) {
                    if (lines[i].includes(',') && lines[i].length > 20) {
                        extractedData.sections[1].content = lines[i].replace(/\n/g, '<br>');
                        break;
                    }
                }
            }
            
            // Find affiliations
            const institutionKeywords = /university|hospital|institute|center|department|school|college|clinic|laboratory/i;
            const affiliationLines = lines.filter(line => 
                institutionKeywords.test(line) && line.length > 20
            ).slice(0, 3);
            if (affiliationLines.length > 0) {
                extractedData.sections[2].content = affiliationLines.join('; ').replace(/\n/g, '<br>');
            }
            
            // Find conference
            const conferenceKeywords = /presented at|conference|meeting|symposium|congress|annual|poster/i;
            const conferenceLine = lines.find(line => 
                conferenceKeywords.test(line) && line.length > 20
            );
            if (conferenceLine) {
                extractedData.sections[3].content = conferenceLine.replace(/\n/g, '<br>');
            }
            
            // Extract content sections
            const sectionKeywords = [
                { keywords: /abstract/i, title: 'Abstract', icon: 'üìÑ' },
                { keywords: /introduction|background/i, title: 'Background', icon: 'üî¨' },
                { keywords: /objective|aim|purpose|goal/i, title: 'Objectives', icon: 'üéØ' },
                { keywords: /method/i, title: 'Methods', icon: 'üß™' },
                { keywords: /result/i, title: 'Results', icon: 'üìä' },
                { keywords: /discussion/i, title: 'Discussion', icon: 'üí≠' },
                { keywords: /conclusion/i, title: 'Conclusions', icon: 'üí°' },
                { keywords: /reference/i, title: 'References', icon: 'üìö' }
            ];
            
            for (let i = 0; i < lines.length; i++) {
                const line = lines[i];
                
                for (const { keywords, title, icon } of sectionKeywords) {
                    if (keywords.test(line)) {
                        let content = '';
                        let j = i + 1;
                        
                        while (j < lines.length && j < i + 30) {
                            const nextLine = lines[j];
                            const isNewSection = sectionKeywords.some(sk => sk.keywords.test(nextLine));
                            if (isNewSection) break;
                            
                            if (nextLine.length > 10) {
                                content += nextLine + '\n';
                            }
                            j++;
                        }
                        
                        if (content.trim()) {
                            extractedData.sections.push({
                                id: Date.now() + Math.random(),
                                title: title,
                                content: content.trim().replace(/\n/g, '<br>'),
                                icon: icon,
                                image: null,
                                isHeader: false
                            });
                        }
                        break;
                    }
                }
            }
            
            // If no content sections found, add default ones
            const contentSections = extractedData.sections.filter(s => !s.isHeader);
            if (contentSections.length === 0) {
                extractedData.sections.push(
                    {
                        id: Date.now() + 10,
                        title: 'Background',
                        content: '',
                        icon: 'üî¨',
                        image: null,
                        isHeader: false
                    },
                    {
                        id: Date.now() + 11,
                        title: 'Methods',
                        content: '',
                        icon: 'üß™',
                        image: null,
                        isHeader: false
                    },
                    {
                        id: Date.now() + 12,
                        title: 'Results',
                        content: '',
                        icon: 'üìä',
                        image: null,
                        isHeader: false
                    },
                    {
                        id: Date.now() + 13,
                        title: 'Conclusions',
                        content: '',
                        icon: 'üí°',
                        image: null,
                        isHeader: false
                    }
                );
            }
            
            // Set all sections as expanded by default
            extractedData.sections.forEach(section => {
                expandedSections[section.id] = true;
            });
        }

        function createEmptyTemplate() {
            extractedData = {
                sections: [
                    {
                        id: Date.now() + 1,
                        title: 'Title',
                        content: '',
                        icon: 'üìå',
                        image: null,
                        isHeader: true,
                        type: 'title'
                    },
                    {
                        id: Date.now() + 2,
                        title: 'Authors',
                        content: '',
                        icon: 'üë•',
                        image: null,
                        isHeader: true,
                        type: 'authors'
                    },
                    {
                        id: Date.now() + 3,
                        title: 'Affiliations',
                        content: '',
                        icon: 'üèõÔ∏è',
                        image: null,
                        isHeader: true,
                        type: 'affiliations'
                    },
                    {
                        id: Date.now() + 4,
                        title: 'Conference',
                        content: '',
                        icon: 'üéØ',
                        image: null,
                        isHeader: true,
                        type: 'conference'
                    },
                    {
                        id: Date.now() + 10,
                        title: 'Background',
                        content: '',
                        icon: 'üî¨',
                        image: null,
                        isHeader: false
                    },
                    {
                        id: Date.now() + 11,
                        title: 'Methods',
                        content: '',
                        icon: 'üß™',
                        image: null,
                        isHeader: false
                    },
                    {
                        id: Date.now() + 12,
                        title: 'Results',
                        content: '',
                        icon: 'üìä',
                        image: null,
                        isHeader: false
                    },
                    {
                        id: Date.now() + 13,
                        title: 'Conclusions',
                        content: '',
                        icon: 'üí°',
                        image: null,
                        isHeader: false
                    }
                ],
                logo: null,
                primaryColor: '#16a34a',
                secondaryColor: '#6b7280',
                fontStyle: 'system',
                layoutStyle: 'single',
                titleSize: 32,
                contentSize: 16
            };
            
            extractedData.sections.forEach(section => {
                expandedSections[section.id] = true;
            });
        }

        function populateForm() {
            document.getElementById('pdfName').textContent = uploadedFile ? uploadedFile.name : '';
            populateSections();
        }

        function populateSections() {
            const container = document.getElementById('sectionsContainer');
            container.innerHTML = '';
            
            extractedData.sections.forEach((section, index) => {
                addSectionElement(section, index);
            });
        }

        function addSectionElement(section, index) {
            const container = document.getElementById('sectionsContainer');
            const sectionDiv = document.createElement('div');
            sectionDiv.className = 'section-editor' + (section.isHeader ? ' header-section' : '');
            sectionDiv.dataset.sectionId = section.id;
            
            const isFirst = index === 0;
            const isLast = index === extractedData.sections.length - 1;
            const isExpanded = expandedSections[section.id] !== false;
            
            sectionDiv.innerHTML = `
                <div class="section-header" onclick="toggleSection(${section.id})">
                    <div class="section-title-group">
                        <span class="section-icon" onclick="event.stopPropagation(); toggleIconPicker(${section.id})" title="Click to change icon">${section.icon || 'üìÑ'}</span>
                        <span class="section-name">${section.title}${section.isHeader ? ' (Header)' : ''}</span>
                        <span class="expand-indicator">${isExpanded ? '‚ñº' : '‚ñ∂'}</span>
                        <div class="icon-picker" id="iconPicker-${section.id}">
                            ${availableIcons.map(icon => `
                                <div class="icon-option" onclick="selectIcon(${section.id}, '${icon}')">${icon}</div>
                            `).join('')}
                        </div>
                    </div>
                    <div class="section-controls">
                        <button class="icon-btn" onclick="event.stopPropagation(); moveSection(${index}, -1)" ${isFirst ? 'disabled' : ''}>‚Üë</button>
                        <button class="icon-btn" onclick="event.stopPropagation(); moveSection(${index}, 1)" ${isLast ? 'disabled' : ''}>‚Üì</button>
                        ${!section.isHeader ? `<button class="icon-btn danger" onclick="event.stopPropagation(); removeSection(${section.id})">√ó</button>` : ''}
                    </div>
                </div>
                <div class="section-content ${isExpanded ? 'expanded' : ''}">
                    <div style="position: relative;">
                        <div class="form-group">
                            <label class="form-label">Section Title</label>
                            <input type="text" class="form-input" value="${section.title}" onchange="updateSection(${section.id}, 'title', this.value)">
                        </div>
                        <div class="form-group">
                            <label class="form-label">Content</label>
                            <div class="toolbar">
                                <button class="toolbar-btn" onclick="formatText(${section.id}, 'bold')" title="Bold"><b>B</b></button>
                                <button class="toolbar-btn" onclick="formatText(${section.id}, 'italic')" title="Italic"><i>I</i></button>
                                <button class="toolbar-btn" onclick="formatText(${section.id}, 'underline')" title="Underline"><u>U</u></button>
                                <div class="toolbar-separator"></div>
                                <button class="toolbar-btn" onclick="insertList(${section.id}, 'bullet')" title="Bullet List">‚Ä¢</button>
                                <button class="toolbar-btn" onclick="insertList(${section.id}, 'number')" title="Numbered List">1</button>
                                <button class="toolbar-btn" onclick="formatText(${section.id}, 'superscript')" title="Superscript">^</button>
                            </div>
                            <div id="sectionContent-${section.id}" 
                                 class="form-textarea" 
                                 contenteditable="true" 
                                 style="min-height: 120px; max-height: 300px; overflow-y: auto; white-space: pre-wrap;" 
                                 oninput="updateSectionFromDiv(${section.id})"
                                 onpaste="handlePaste(event, ${section.id})">${section.content}</div>
                        </div>
                        <div class="form-group">
                            <label class="form-label">Image (optional)</label>
                            <input type="file" id="sectionImage-${section.id}" accept="image/*" onchange="handleSectionImage(${section.id}, event)">
                            <button class="btn btn-secondary" onclick="document.getElementById('sectionImage-${section.id}').click()">
                                üì∑ Upload Image
                            </button>
                            ${section.image ? `
                                <div style="margin-top: 16px;">
                                    <img src="${section.image}" alt="Section image" style="max-width: 100%; height: auto; border-radius: 12px; box-shadow: 0 2px 8px rgba(0,0,0,0.1);">
                                    <br>
                                    <button class="btn btn-secondary" onclick="removeSectionImage(${section.id})" style="margin-top: 12px; color: #ef4444;">Remove Image</button>
                                </div>
                            ` : ''}
                        </div>
                    </div>
                </div>
            `;
            
            container.appendChild(sectionDiv);
            
            // Set the innerHTML for the contentEditable div after it's added to DOM
            const contentDiv = document.getElementById(`sectionContent-${section.id}`);
            if (contentDiv) {
                contentDiv.innerHTML = section.content || '';
            }
        }

        function toggleSection(sectionId) {
            expandedSections[sectionId] = !expandedSections[sectionId];
            populateSections();
        }

        function toggleIconPicker(sectionId) {
            // Close any open icon picker
            if (currentIconPicker && currentIconPicker !== sectionId) {
                closeIconPicker();
            }
            
            const picker = document.getElementById(`iconPicker-${sectionId}`);
            if (picker.classList.contains('active')) {
                closeIconPicker();
            } else {
                picker.classList.add('active');
                currentIconPicker = sectionId;
            }
        }

        function closeIconPicker() {
            if (currentIconPicker) {
                const picker = document.getElementById(`iconPicker-${currentIconPicker}`);
                if (picker) {
                    picker.classList.remove('active');
                }
                currentIconPicker = null;
            }
        }

        function selectIcon(sectionId, icon) {
            const section = extractedData.sections.find(s => s.id === sectionId);
            if (section) {
                section.icon = icon;
                populateSections();
                updatePreview();
            }
            closeIconPicker();
        }

        function moveSection(currentIndex, direction) {
            const newIndex = currentIndex + direction;
            
            if (newIndex >= 0 && newIndex < extractedData.sections.length) {
                // Swap sections
                const temp = extractedData.sections[currentIndex];
                extractedData.sections[currentIndex] = extractedData.sections[newIndex];
                extractedData.sections[newIndex] = temp;
                
                populateSections();
                updatePreview();
            }
        }

        function addSection() {
            const newSection = {
                id: Date.now(),
                title: 'New Section',
                content: '',
                icon: 'üìÑ',
                image: null,
                isHeader: false
            };
            extractedData.sections.push(newSection);
            expandedSections[newSection.id] = true;
            populateSections();
            updatePreview();
        }

        function removeSection(id) {
            extractedData.sections = extractedData.sections.filter(s => s.id !== id);
            delete expandedSections[id];
            populateSections();
            updatePreview();
        }

        function updateSection(id, field, value) {
            const section = extractedData.sections.find(s => s.id === id);
            if (section) {
                section[field] = value;
                if (field === 'title') {
                    populateSections();
                }
                updatePreview();
            }
        }

        function formatText(sectionId, format) {
            const editor = document.getElementById(`sectionContent-${sectionId}`);
            editor.focus();
            
            // Check if we have selected text
            const selection = window.getSelection();
            if (selection.rangeCount === 0 || selection.isCollapsed) {
                return;
            }
            
            const range = selection.getRangeAt(0);
            const selectedText = range.toString();
            
            if (selectedText) {
                let element;
                switch(format) {
                    case 'bold':
                        element = document.createElement('b');
                        break;
                    case 'italic':
                        element = document.createElement('i');
                        break;
                    case 'underline':
                        element = document.createElement('u');
                        break;
                    case 'superscript':
                        element = document.createElement('sup');
                        break;
                }
                
                if (element) {
                    try {
                        range.deleteContents();
                        element.textContent = selectedText;
                        range.insertNode(element);
                        
                        // Clear selection
                        selection.removeAllRanges();
                        
                        updateSectionFromDiv(sectionId);
                    } catch (e) {
                        console.error('Error formatting text:', e);
                    }
                }
            }
        }

        function updateSectionFromDiv(sectionId) {
            const editor = document.getElementById(`sectionContent-${sectionId}`);
            let htmlContent = editor.innerHTML;
            
            // Clean up empty paragraphs and divs that browsers sometimes add
            htmlContent = htmlContent
                .replace(/<div><br><\/div>/g, '<br>')
                .replace(/<div>/g, '<br>')
                .replace(/<\/div>/g, '')
                .replace(/^<br>/, '') // Remove leading br
                .replace(/<p><\/p>/g, '')
                .replace(/<p><br><\/p>/g, '<br>');
            
            updateSection(sectionId, 'content', htmlContent);
        }

        function handlePaste(event, sectionId) {
            event.preventDefault();
            const paste = (event.clipboardData || window.clipboardData).getData('text');
            const selection = window.getSelection();
            if (!selection.rangeCount) return;
            
            const range = selection.getRangeAt(0);
            range.deleteContents();
            range.insertNode(document.createTextNode(paste));
            selection.removeAllRanges();
            
            updateSectionFromDiv(sectionId);
        }

        function insertList(sectionId, type) {
            const editor = document.getElementById(`sectionContent-${sectionId}`);
            editor.focus();
            
            const selection = window.getSelection();
            let range;
            
            if (selection.rangeCount === 0) {
                // If no selection, create a range at the end
                range = document.createRange();
                range.selectNodeContents(editor);
                range.collapse(false);
            } else {
                range = selection.getRangeAt(0);
            }
            
            // Create a new line and list item
            const br = document.createElement('br');
            const listItem = type === 'bullet' ? '‚Ä¢ ' : '1. ';
            const textNode = document.createTextNode(listItem);
            
            range.deleteContents();
            range.insertNode(br);
            range.setStartAfter(br);
            range.insertNode(textNode);
            range.setStartAfter(textNode);
            range.collapse(true);
            
            selection.removeAllRanges();
            selection.addRange(range);
            
            updateSectionFromDiv(sectionId);
        }

        function handleSectionImage(sectionId, event) {
            const file = event.target.files[0];
            if (file && file.type.startsWith('image/')) {
                const reader = new FileReader();
                reader.onload = function(e) {
                    const section = extractedData.sections.find(s => s.id === sectionId);
                    if (section) {
                        section.image = e.target.result;
                        populateSections();
                        updatePreview();
                    }
                };
                reader.readAsDataURL(file);
            }
        }

        function removeSectionImage(sectionId) {
            const section = extractedData.sections.find(s => s.id === sectionId);
            if (section) {
                section.image = null;
                populateSections();
                updatePreview();
            }
        }

        function handleLogoUpload(event) {
            const file = event.target.files[0];
            if (file && file.type.startsWith('image/')) {
                const reader = new FileReader();
                reader.onload = function(e) {
                    extractedData.logo = e.target.result;
                    document.getElementById('logoPreview').innerHTML = `
                        <div style="margin-top: 16px;">
                            <img src="${e.target.result}" alt="Logo" style="max-width: 150px; height: auto; border-radius: 12px; box-shadow: 0 2px 8px rgba(0,0,0,0.1);">
                        </div>
                    `;
                    updatePreview();
                };
                reader.readAsDataURL(file);
            }
        }

        function updateColorScheme() {
            const scheme = document.getElementById('colorScheme').value;
            const colors = colorSchemes[scheme];
            
            document.getElementById('primaryColor').value = colors.primary;
            document.getElementById('primaryColorHex').value = colors.primary;
            document.getElementById('secondaryColor').value = colors.secondary;
            document.getElementById('secondaryColorHex').value = colors.secondary;
            
            extractedData.primaryColor = colors.primary;
            extractedData.secondaryColor = colors.secondary;
            
            updatePreview();
        }

        function updateTitleSize() {
            const value = document.getElementById('titleSize').value;
            document.getElementById('titleSizeValue').textContent = value + 'px';
            extractedData.titleSize = parseInt(value);
            updatePreview();
        }

        function updateContentSize() {
            const value = document.getElementById('contentSize').value;
            document.getElementById('contentSizeValue').textContent = value + 'px';
            extractedData.contentSize = parseInt(value);
            updatePreview();
        }

        function updatePreview() {
            const iframe = document.getElementById('websitePreview');
            const fullPreview = document.getElementById('fullPreview');
            
            // Get current values
            extractedData.primaryColor = document.getElementById('primaryColor').value;
            extractedData.secondaryColor = document.getElementById('secondaryColor').value;
            extractedData.fontStyle = document.getElementById('fontStyle').value;
            extractedData.layoutStyle = document.getElementById('layoutStyle').value;
            
            const html = generatePreviewHTML();
            iframe.srcdoc = html;
            if (fullPreview) {
                fullPreview.srcdoc = html;
            }
        }

        function generatePreviewHTML() {
            const fontMap = {
                system: '-apple-system, BlinkMacSystemFont, "Segoe UI", system-ui, sans-serif',
                serif: 'Georgia, "Times New Roman", serif',
                mono: '"SF Mono", Monaco, "Cascadia Code", monospace'
            };

            const processContent = (content) => {
                // Content is already HTML from contentEditable, just clean it up
                return content
                    .replace(/<div>/g, '<br>')
                    .replace(/<\/div>/g, '')
                    .replace(/^<br>/, '') // Remove leading br
                    .replace(/<br>\s*<br>/g, '<br>'); // Replace double breaks
            };

            // Get header sections
            const titleSection = extractedData.sections.find(s => s.type === 'title');
            const authorsSection = extractedData.sections.find(s => s.type === 'authors');
            const affiliationsSection = extractedData.sections.find(s => s.type === 'affiliations');
            const conferenceSection = extractedData.sections.find(s => s.type === 'conference');

            // Get content sections (non-header)
            const contentSections = extractedData.sections.filter(s => !s.isHeader);

            const isNavLayout = extractedData.layoutStyle === 'sections';

            // Navigation for sections layout
            const navHTML = isNavLayout && contentSections.length > 0 ? `
                <nav style="position: fixed; top: 0; left: 0; right: 0; background: ${extractedData.secondaryColor}; z-index: 1000; box-shadow: 0 2px 10px rgba(0,0,0,0.1);">
                    <div style="max-width: 1200px; margin: 0 auto; padding: 15px 40px; display: flex; justify-content: center; align-items: center;">
                        <div style="display: flex; gap: 30px; flex-wrap: wrap; justify-content: center;">
                            ${contentSections.map((section, idx) => `
                                <a href="#section-${idx}" style="color: white; text-decoration: none; padding: 10px 20px; border-radius: 4px; transition: all 0.3s;" onmouseover="this.style.background='rgba(255,255,255,0.1)'" onmouseout="this.style.background='transparent'">
                                    ${section.icon} ${section.title}
                                </a>
                            `).join('')}
                        </div>
                    </div>
                </nav>
            ` : '';

            // Regular sections layout
            const sectionsHTML = contentSections.map((section, idx) => `
                <div class="section" id="section-${idx}" style="scroll-margin-top: ${isNavLayout ? '80px' : '0'};">
                    <h2>${section.icon} ${section.title}</h2>
                    <div class="section-content">${processContent(section.content)}</div>
                    ${section.image ? `
                        <div style="text-align: center; margin-top: 24px;">
                            <img src="${section.image}" style="max-width: 100%; height: auto; border-radius: 12px; box-shadow: 0 4px 12px rgba(0,0,0,0.1);">
                        </div>
                    ` : ''}
                </div>
            `).join('');

            return `
                <!DOCTYPE html>
                <html>
                <head>
                    <meta name="viewport" content="width=device-width, initial-scale=1.0">
                    <style>
                        * { margin: 0; padding: 0; box-sizing: border-box; }
                        html { scroll-behavior: smooth; }
                        body {
                            font-family: ${fontMap[extractedData.fontStyle]};
                            line-height: 1.6;
                            color: #1a1a1a;
                            background: #f8fafc;
                            ${isNavLayout ? 'padding-top: 60px;' : ''}
                        }
                        .header {
                            background: linear-gradient(135deg, ${extractedData.primaryColor} 0%, ${extractedData.secondaryColor} 100%);
                            color: white;
                            padding: 80px 40px;
                            text-align: center;
                        }
                        .container {
                            max-width: 1000px;
                            margin: 0 auto;
                            padding: 40px 20px;
                        }
                        .content {
                            background: white;
                            padding: 60px;
                            border-radius: 20px;
                            box-shadow: 0 10px 40px rgba(0,0,0,0.1);
                            margin-top: -40px;
                            position: relative;
                        }
                        h1 {
                            font-size: ${extractedData.titleSize}px;
                            margin-bottom: 20px;
                            line-height: 1.2;
                            font-weight: 600;
                        }
                        .authors {
                            font-size: 20px;
                            opacity: 0.9;
                            margin-bottom: 16px;
                        }
                        .affiliations {
                            font-size: 16px;
                            opacity: 0.8;
                            margin-bottom: 12px;
                        }
                        .conference {
                            font-size: 14px;
                            opacity: 0.7;
                        }
                        .section {
                            margin-bottom: 40px;
                            padding: 32px;
                            background: linear-gradient(135deg, #f8fafc 0%, #f1f5f9 100%);
                            border-radius: 16px;
                            border: 1px solid #e2e8f0;
                            transition: all 0.3s ease;
                        }
                        .section:hover {
                            transform: translateY(-2px);
                            box-shadow: 0 8px 25px rgba(0,0,0,0.1);
                        }
                        .section h2 {
                            color: ${extractedData.primaryColor};
                            margin-bottom: 20px;
                            font-size: 24px;
                            font-weight: 600;
                        }
                        .section-content {
                            font-size: ${extractedData.contentSize}px;
                            line-height: 1.7;
                            color: #374151;
                        }
                        
                        @media (max-width: 768px) {
                            .header { padding: 60px 20px; }
                            h1 { font-size: ${extractedData.titleSize * 0.8}px; }
                            .content { padding: 40px 20px; }
                            .section { padding: 24px; }
                            nav > div { padding: 10px 20px; }
                            nav > div > div { gap: 10px !important; }
                            nav a { font-size: 14px; padding: 8px 12px; }
                        }
                    </style>
                </head>
                <body>
                    ${navHTML}
                    <div class="header">
                        <div class="container">
                            ${extractedData.logo ? `<img src="${extractedData.logo}" style="max-height: 80px; margin-bottom: 20px; border-radius: 8px;">` : ''}
                            <h1>${titleSection?.content ? processContent(titleSection.content) : 'Your Poster Title'}</h1>
                            <div class="authors">${authorsSection?.content ? processContent(authorsSection.content) : ''}</div>
                            <div class="affiliations">${affiliationsSection?.content ? processContent(affiliationsSection.content) : ''}</div>
                            <div class="conference">${conferenceSection?.content ? processContent(conferenceSection.content) : ''}</div>
                        </div>
                    </div>
                    <div class="container">
                        <div class="content">
                            ${sectionsHTML}
                        </div>
                    </div>
                </body>
                </html>
            `;
        }

        function setPreviewDevice(device) {
            // Update button states
            document.querySelectorAll('.modal-header .btn').forEach(btn => {
                btn.classList.remove('active');
            });
            
            const buttonMap = {
                'desktop': 'desktopBtn',
                'tablet-h': 'tabletHBtn', 
                'tablet-v': 'tabletVBtn',
                'mobile': 'mobileBtn'
            };
            
            document.getElementById(buttonMap[device]).classList.add('active');
            
            // Update preview frame
            const frame = document.getElementById('previewFrame');
            frame.className = `preview-frame ${device}`;
        }

        function showToast(message, type = 'success') {
            const toast = document.getElementById('toast');
            toast.textContent = message;
            toast.className = `toast ${type} show`;
            
            setTimeout(() => {
                toast.classList.remove('show');
            }, 3000);
        }

        function showPreviewModal() {
            updatePreview();
            document.getElementById('previewModal').classList.add('active');
        }

        function closePreviewModal() {
            document.getElementById('previewModal').classList.remove('active');
        }

        function exportWebsite() {
            document.getElementById('exportModal').classList.add('active');
        }

        function closeExportModal() {
            document.getElementById('exportModal').classList.remove('active');
        }

        function downloadWebsite() {
            const format = document.querySelector('input[name="exportFormat"]:checked').value;
            let code = '';
            let filename = '';
            
            if (format === 'html') {
                code = generatePreviewHTML();
                filename = 'poster-website.html';
            } else if (format === 'react') {
                code = generateReactComponent();
                filename = 'PosterWebsite.jsx';
            } else if (format === 'nextjs') {
                code = generateNextJSPage();
                filename = 'poster-page.js';
            }
            
            const blob = new Blob([code], { type: 'text/plain' });
            const url = window.URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = filename;
            a.click();
            window.URL.revokeObjectURL(url);
            
            closeExportModal();
            showToast('Website code downloaded successfully!', 'success');
        }

        function generateReactComponent() {
            const titleSection = extractedData.sections.find(s => s.type === 'title');
            const authorsSection = extractedData.sections.find(s => s.type === 'authors');
            const affiliationsSection = extractedData.sections.find(s => s.type === 'affiliations');
            const conferenceSection = extractedData.sections.find(s => s.type === 'conference');
            const contentSections = extractedData.sections.filter(s => !s.isHeader);
            
            return `import React from 'react';

const PosterWebsite = () => {
    const data = ${JSON.stringify(extractedData, null, 2)};
    
    const titleSection = data.sections.find(s => s.type === 'title');
    const authorsSection = data.sections.find(s => s.type === 'authors');
    const affiliationsSection = data.sections.find(s => s.type === 'affiliations');
    const conferenceSection = data.sections.find(s => s.type === 'conference');
    const contentSections = data.sections.filter(s => !s.isHeader);
    const isNavLayout = data.layoutStyle === 'sections';
    
    return (
        <div className="poster-website">
            {isNavLayout && contentSections.length > 0 && (
                <nav style={{ 
                    position: 'fixed', 
                    top: 0, 
                    left: 0, 
                    right: 0, 
                    background: data.secondaryColor, 
                    zIndex: 1000,
                    boxShadow: '0 2px 10px rgba(0,0,0,0.1)'
                }}>
                    <div style={{ maxWidth: '1200px', margin: '0 auto', padding: '15px 40px', display: 'flex', justifyContent: 'center' }}>
                        <div style={{ display: 'flex', gap: '30px', flexWrap: 'wrap', justifyContent: 'center' }}>
                            {contentSections.map((section, idx) => (
                                <a key={idx} href={"#section-" + idx} style={{ 
                                    color: 'white', 
                                    textDecoration: 'none', 
                                    padding: '10px 20px', 
                                    borderRadius: '4px',
                                    transition: 'all 0.3s'
                                }}>
                                    {section.icon} {section.title}
                                </a>
                            ))}
                        </div>
                    </div>
                </nav>
            )}
            <header style={{ 
                background: "linear-gradient(135deg, " + data.primaryColor + " 0%, " + data.secondaryColor + " 100%)",
                color: 'white',
                padding: '80px 40px',
                textAlign: 'center',
                paddingTop: isNavLayout ? '140px' : '80px'
            }}>
                <div style={{ maxWidth: '1000px', margin: '0 auto' }}>
                    {data.logo && <img src={data.logo} alt="Logo" style={{ maxHeight: '80px', marginBottom: '20px', borderRadius: '8px' }} />}
                    <h1 style={{ fontSize: data.titleSize + 'px', fontWeight: 600, marginBottom: '20px', lineHeight: 1.2 }}>
                        {titleSection?.content || 'Your Poster Title'}
                    </h1>
                    <div className="authors" style={{ fontSize: '20px', opacity: 0.9, marginBottom: '16px' }}>
                        {authorsSection?.content || ''}
                    </div>
                    <div className="affiliations" style={{ fontSize: '16px', opacity: 0.8, marginBottom: '12px' }}>
                        {affiliationsSection?.content || ''}
                    </div>
                    <div className="conference" style={{ fontSize: '14px', opacity: 0.7 }}>
                        {conferenceSection?.content || ''}
                    </div>
                </div>
            </header>
            <main style={{ maxWidth: '1000px', margin: '0 auto', padding: '40px 20px' }}>
                <div style={{ 
                    background: 'white', 
                    padding: '60px', 
                    borderRadius: '20px', 
                    boxShadow: '0 10px 40px rgba(0,0,0,0.1)',
                    marginTop: '-40px',
                    position: 'relative'
                }}>
                    {contentSections.map((section, idx) => (
                        <section key={idx} id={"section-" + idx} style={{
                            marginBottom: '40px',
                            padding: '32px',
                            background: 'linear-gradient(135deg, #f8fafc 0%, #f1f5f9 100%)',
                            borderRadius: '16px',
                            border: '1px solid #e2e8f0',
                            scrollMarginTop: isNavLayout ? '80px' : '0'
                        }}>
                            <h2 style={{ color: data.primaryColor, marginBottom: '20px', fontSize: '24px', fontWeight: 600 }}>
                                {section.icon} {section.title}
                            </h2>
                            <div style={{ fontSize: data.contentSize + 'px', lineHeight: 1.7, color: '#374151' }}
                                 dangerouslySetInnerHTML={{ __html: section.content }} />
                            {section.image && (
                                <div style={{ textAlign: 'center', marginTop: '24px' }}>
                                    <img src={section.image} alt={section.title} 
                                         style={{ maxWidth: '100%', height: 'auto', borderRadius: '12px', boxShadow: '0 4px 12px rgba(0,0,0,0.1)' }} />
                                </div>
                            )}
                        </section>
                    ))}
                </div>
            </main>
        </div>
    );
};

export default PosterWebsite;`;
        }

        function generateNextJSPage() {
            const titleSection = extractedData.sections.find(s => s.type === 'title');
            const authorsSection = extractedData.sections.find(s => s.type === 'authors');
            const affiliationsSection = extractedData.sections.find(s => s.type === 'affiliations');
            const conferenceSection = extractedData.sections.find(s => s.type === 'conference');
            const contentSections = extractedData.sections.filter(s => !s.isHeader);
            
            return `import Head from 'next/head';

export default function PosterPage() {
    const data = ${JSON.stringify(extractedData, null, 2)};
    
    const titleSection = data.sections.find(s => s.type === 'title');
    const authorsSection = data.sections.find(s => s.type === 'authors');
    const affiliationsSection = data.sections.find(s => s.type === 'affiliations');
    const conferenceSection = data.sections.find(s => s.type === 'conference');
    const contentSections = data.sections.filter(s => !s.isHeader);
    const isNavLayout = data.layoutStyle === 'sections';
    
    return (
        <>
            <Head>
                <title>{titleSection?.content || 'Medical Poster'}</title>
                <meta name="description" content={titleSection?.content || 'Medical research poster'} />
                <meta name="viewport" content="width=device-width, initial-scale=1.0" />
            </Head>
            <div className="poster-website">
                {isNavLayout && contentSections.length > 0 && (
                    <nav style={{ 
                        position: 'fixed', 
                        top: 0, 
                        left: 0, 
                        right: 0, 
                        background: data.secondaryColor, 
                        zIndex: 1000,
                        boxShadow: '0 2px 10px rgba(0,0,0,0.1)'
                    }}>
                        <div style={{ maxWidth: '1200px', margin: '0 auto', padding: '15px 40px', display: 'flex', justifyContent: 'center' }}>
                            <div style={{ display: 'flex', gap: '30px', flexWrap: 'wrap', justifyContent: 'center' }}>
                                {contentSections.map((section, idx) => (
                                    <a key={idx} href={"#section-" + idx} style={{ 
                                        color: 'white', 
                                        textDecoration: 'none', 
                                        padding: '10px 20px', 
                                        borderRadius: '4px',
                                        transition: 'all 0.3s'
                                    }}>
                                        {section.icon} {section.title}
                                    </a>
                                ))}
                            </div>
                        </div>
                    </nav>
                )}
                <header style={{ 
                    background: "linear-gradient(135deg, " + data.primaryColor + " 0%, " + data.secondaryColor + " 100%)",
                    color: 'white',
                    padding: '80px 40px',
                    textAlign: 'center',
                    paddingTop: isNavLayout ? '140px' : '80px'
                }}>
                    <div style={{ maxWidth: '1000px', margin: '0 auto' }}>
                        {data.logo && <img src={data.logo} alt="Logo" style={{ maxHeight: '80px', marginBottom: '20px', borderRadius: '8px' }} />}
                        <h1 style={{ fontSize: data.titleSize + 'px', fontWeight: 600, marginBottom: '20px', lineHeight: 1.2 }}>
                            {titleSection?.content || 'Your Poster Title'}
                        </h1>
                        <div className="authors" style={{ fontSize: '20px', opacity: 0.9, marginBottom: '16px' }}>
                            {authorsSection?.content || ''}
                        </div>
                        <div className="affiliations" style={{ fontSize: '16px', opacity: 0.8, marginBottom: '12px' }}>
                            {affiliationsSection?.content || ''}
                        </div>
                        <div className="conference" style={{ fontSize: '14px', opacity: 0.7 }}>
                            {conferenceSection?.content || ''}
                        </div>
                    </div>
                </header>
                <main style={{ maxWidth: '1000px', margin: '0 auto', padding: '40px 20px' }}>
                    <div style={{ 
                        background: 'white', 
                        padding: '60px', 
                        borderRadius: '20px', 
                        boxShadow: '0 10px 40px rgba(0,0,0,0.1)',
                        marginTop: '-40px',
                        position: 'relative'
                    }}>
                        {contentSections.map((section, idx) => (
                            <section key={idx} id={"section-" + idx} style={{
                                marginBottom: '40px',
                                padding: '32px',
                                background: 'linear-gradient(135deg, #f8fafc 0%, #f1f5f9 100%)',
                                borderRadius: '16px',
                                border: '1px solid #e2e8f0',
                                scrollMarginTop: isNavLayout ? '80px' : '0'
                            }}>
                                <h2 style={{ color: data.primaryColor, marginBottom: '20px', fontSize: '24px', fontWeight: 600 }}>
                                    {section.icon} {section.title}
                                </h2>
                                <div style={{ fontSize: data.contentSize + 'px', lineHeight: 1.7, color: '#374151' }}
                                     dangerouslySetInnerHTML={{ __html: section.content }} />
                                {section.image && (
                                    <div style={{ textAlign: 'center', marginTop: '24px' }}>
                                        <img src={section.image} alt={section.title} 
                                             style={{ maxWidth: '100%', height: 'auto', borderRadius: '12px', boxShadow: '0 4px 12px rgba(0,0,0,0.1)' }} />
                                    </div>
                                )}
                            </section>
                        ))}
                    </div>
                </main>
            </div>
        </>
    );
}`;
        }

        // Back button functionality
        document.getElementById('backButton').addEventListener('click', function() {
            goHome();
        });

        // Home and Info button functions
        function goHome() {
            document.getElementById('editorScreen').classList.remove('active');
            document.getElementById('uploadScreen').classList.add('active');
            
            // Reset form
            document.getElementById('fileInput').value = '';
            document.getElementById('pdfName').textContent = '';
            extractedData = {
                sections: [],
                logo: null,
                primaryColor: '#16a34a',
                secondaryColor: '#6b7280',
                fontStyle: 'system',
                layoutStyle: 'single',
                titleSize: 32,
                contentSize: 16
            };
            expandedSections = {};
            
            showToast('Ready for new poster upload', 'success');
        }

        function showInfo() {
            // Create and show info modal
            const modal = document.createElement('div');
            modal.className = 'modal active';
            modal.innerHTML = `
                <div class="modal-content">
                    <button class="close-btn" onclick="this.closest('.modal').remove()">√ó</button>
                    <h2 class="modal-title">How to Use the Medical Poster Converter</h2>
                    <p class="modal-subtitle">Transform your research posters into beautiful websites</p>
                    
                    <div style="margin-bottom: 32px;">
                        <h3 style="font-size: 20px; font-weight: 600; margin-bottom: 16px; color: #16a34a;">üöÄ Quick Start Guide</h3>
                        <div style="background: #f0fdf4; padding: 24px; border-radius: 12px; border: 1px solid #bbf7d0;">
                            <div style="display: flex; align-items: start; gap: 16px; margin-bottom: 16px;">
                                <div style="width: 32px; height: 32px; background: #16a34a; color: white; border-radius: 50%; display: flex; align-items: center; justify-content: center; flex-shrink: 0; font-weight: 600;">1</div>
                                <div>
                                    <strong>Upload Your Poster</strong><br>
                                    <span style="color: #6b7280;">Drag and drop or click to upload your PDF, Word document, or image file</span>
                                </div>
                            </div>
                            <div style="display: flex; align-items: start; gap: 16px; margin-bottom: 16px;">
                                <div style="width: 32px; height: 32px; background: #16a34a; color: white; border-radius: 50%; display: flex; align-items: center; justify-content: center; flex-shrink: 0; font-weight: 600;">2</div>
                                <div>
                                    <strong>Review Extracted Content</strong><br>
                                    <span style="color: #6b7280;">The app automatically extracts text from PDFs and organizes it into sections</span>
                                </div>
                            </div>
                            <div style="display: flex; align-items: start; gap: 16px; margin-bottom: 16px;">
                                <div style="width: 32px; height: 32px; background: #16a34a; color: white; border-radius: 50%; display: flex; align-items: center; justify-content: center; flex-shrink: 0; font-weight: 600;">3</div>
                                <div>
                                    <strong>Edit and Customize</strong><br>
                                    <span style="color: #6b7280;">Edit text with formatting options, change icons, reorder sections, add images</span>
                                </div>
                            </div>
                            <div style="display: flex; align-items: start; gap: 16px;">
                                <div style="width: 32px; height: 32px; background: #16a34a; color: white; border-radius: 50%; display: flex; align-items: center; justify-content: center; flex-shrink: 0; font-weight: 600;">4</div>
                                <div>
                                    <strong>Export Your Website</strong><br>
                                    <span style="color: #6b7280;">Download as HTML, React component, or Next.js page</span>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <div style="margin-bottom: 32px;">
                        <h3 style="font-size: 20px; font-weight: 600; margin-bottom: 16px; color: #16a34a;">‚ú® Key Features</h3>
                        <ul style="line-height: 1.8; color: #6b7280; margin-left: 20px;">
                            <li><strong>PDF Text Extraction:</strong> Automatically extracts content from PDF posters</li>
                            <li><strong>Rich Text Editing:</strong> Format text with bold, italic, underline, and lists</li>
                            <li><strong>Section Management:</strong> All sections can be reordered, including title/authors</li>
                            <li><strong>Icon Customization:</strong> Click any section icon to change it</li>
                            <li><strong>Image Support:</strong> Add images to any section</li>
                            <li><strong>Color Schemes:</strong> Choose from predefined schemes or customize</li>
                            <li><strong>Section Navigation:</strong> Fixed navigation menu for easy browsing</li>
                            <li><strong>Responsive Design:</strong> Websites work perfectly on all devices</li>
                            <li><strong>Multiple Export Formats:</strong> HTML, React, or Next.js</li>
                        </ul>
                    </div>
                    
                    <div style="background: #dcfce7; padding: 20px; border-radius: 12px; border: 1px solid #bbf7d0;">
                        <h4 style="color: #15803d; margin-bottom: 12px;">üí° Tips for Best Results</h4>
                        <ul style="line-height: 1.6; color: #374151; margin-left: 20px; font-size: 14px;">
                            <li>Use high-quality PDFs with selectable text for best extraction</li>
                            <li>Click on section icons to change them</li>
                            <li>All sections (including title/authors) can be reordered with arrow buttons</li>
                            <li>Use the Section Navigation layout for easy browsing</li>
                            <li>Add images to make your sections more engaging</li>
                            <li>Use the preview feature to test your website</li>
                        </ul>
                    </div>
                </div>
            `;
            document.body.appendChild(modal);
        }

        // Auto-save on input change
        document.addEventListener('input', function(e) {
            if (e.target.tagName === 'INPUT' || e.target.tagName === 'TEXTAREA' || e.target.tagName === 'SELECT') {
                updatePreview();
            }
        });

        // Close modal when clicking outside
        window.onclick = function(event) {
            if (event.target.classList.contains('modal')) {
                event.target.classList.remove('active');
            }
        }
    </script>
</body>
</html>